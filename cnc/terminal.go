package main

import (
	"net"
	"time"
)

type Terminal struct {
	Conn           net.Conn
	ConnectedSince time.Time
	BytesWritten   []byte
	BytesReceived  []string
	RelayPos       int
	GradientCurve  []string
}

func CreateShell(conn net.Conn) *Terminal {

	conn.Write([]byte{
		255, 251, 1,
		255, 251, 3,
		255, 252, 34,
	})

	conn.Write([]byte(
		"\033c",
	))

	return &Terminal{
		GradientCurve:  GradientTwo,
		Conn:           conn,
		ConnectedSince: time.Now(),
	}
}

func (Term *Terminal) SetRGB() (int, error) {
	return Term.Conn.Write([]byte{
		255, 251, 1,
		255, 251, 3,
		255, 252, 34,
	})
}

var (
	GradientOne = []string{"\x1b[38;2;2;10;252m", "\x1b[38;2;6;10;250m", "\x1b[38;2;10;10;249m", "\x1b[38;2;14;10;247m", "\x1b[38;2;18;9;246m", "\x1b[38;2;22;9;244m", "\x1b[38;2;26;9;243m", "\x1b[38;2;30;9;241m", "\x1b[38;2;34;9;240m", "\x1b[38;2;38;9;238m", "\x1b[38;2;42;9;237m", "\x1b[38;2;46;9;235m", "\x1b[38;2;50;8;234m", "\x1b[38;2;54;8;232m", "\x1b[38;2;58;8;231m", "\x1b[38;2;62;8;229m", "\x1b[38;2;65;8;228m", "\x1b[38;2;69;8;226m", "\x1b[38;2;73;8;225m", "\x1b[38;2;77;8;223m", "\x1b[38;2;81;7;222m", "\x1b[38;2;85;7;220m", "\x1b[38;2;89;7;219m", "\x1b[38;2;93;7;217m", "\x1b[38;2;97;7;216m", "\x1b[38;2;101;7;214m", "\x1b[38;2;105;7;213m", "\x1b[38;2;109;7;211m", "\x1b[38;2;113;6;210m", "\x1b[38;2;117;6;208m", "\x1b[38;2;121;6;207m", "\x1b[38;2;125;6;205m", "\x1b[38;2;129;6;204m", "\x1b[38;2;133;6;202m", "\x1b[38;2;137;6;201m", "\x1b[38;2;141;6;199m", "\x1b[38;2;145;5;198m", "\x1b[38;2;149;5;196m", "\x1b[38;2;153;5;195m", "\x1b[38;2;157;5;193m", "\x1b[38;2;161;5;192m", "\x1b[38;2;165;5;190m", "\x1b[38;2;169;5;189m", "\x1b[38;2;173;5;187m", "\x1b[38;2;177;4;186m", "\x1b[38;2;181;4;184m", "\x1b[38;2;185;4;183m", "\x1b[38;2;189;4;181m", "\x1b[38;2;192;4;180m", "\x1b[38;2;196;4;178m", "\x1b[38;2;200;4;177m", "\x1b[38;2;204;4;175m", "\x1b[38;2;208;3;174m", "\x1b[38;2;212;3;172m", "\x1b[38;2;216;3;171m", "\x1b[38;2;220;3;169m", "\x1b[38;2;224;3;168m", "\x1b[38;2;228;3;166m", "\x1b[38;2;232;3;165m", "\x1b[38;2;236;3;163m", "\x1b[38;2;240;2;162m", "\x1b[38;2;244;2;160m", "\x1b[38;2;248;2;159m", "\x1b[38;2;252;2;157m", "\x1b[38;2;2;10;252m", "\x1b[38;2;6;10;250m", "\x1b[38;2;10;10;249m", "\x1b[38;2;14;10;247m", "\x1b[38;2;18;9;246m", "\x1b[38;2;22;9;244m", "\x1b[38;2;26;9;243m", "\x1b[38;2;30;9;241m", "\x1b[38;2;34;9;240m", "\x1b[38;2;38;9;238m", "\x1b[38;2;42;9;237m", "\x1b[38;2;46;9;235m", "\x1b[38;2;50;8;234m", "\x1b[38;2;54;8;232m", "\x1b[38;2;58;8;231m", "\x1b[38;2;62;8;229m", "\x1b[38;2;65;8;228m", "\x1b[38;2;69;8;226m", "\x1b[38;2;73;8;225m", "\x1b[38;2;77;8;223m", "\x1b[38;2;81;7;222m", "\x1b[38;2;85;7;220m", "\x1b[38;2;89;7;219m", "\x1b[38;2;93;7;217m", "\x1b[38;2;97;7;216m", "\x1b[38;2;101;7;214m", "\x1b[38;2;105;7;213m", "\x1b[38;2;109;7;211m", "\x1b[38;2;113;6;210m", "\x1b[38;2;117;6;208m", "\x1b[38;2;121;6;207m", "\x1b[38;2;125;6;205m", "\x1b[38;2;129;6;204m", "\x1b[38;2;133;6;202m", "\x1b[38;2;137;6;201m", "\x1b[38;2;141;6;199m", "\x1b[38;2;145;5;198m", "\x1b[38;2;149;5;196m", "\x1b[38;2;153;5;195m", "\x1b[38;2;157;5;193m", "\x1b[38;2;161;5;192m", "\x1b[38;2;165;5;190m", "\x1b[38;2;169;5;189m", "\x1b[38;2;173;5;187m", "\x1b[38;2;177;4;186m", "\x1b[38;2;181;4;184m", "\x1b[38;2;185;4;183m", "\x1b[38;2;189;4;181m", "\x1b[38;2;192;4;180m", "\x1b[38;2;196;4;178m", "\x1b[38;2;200;4;177m", "\x1b[38;2;204;4;175m", "\x1b[38;2;208;3;174m", "\x1b[38;2;212;3;172m", "\x1b[38;2;216;3;171m", "\x1b[38;2;220;3;169m", "\x1b[38;2;224;3;168m", "\x1b[38;2;228;3;166m", "\x1b[38;2;232;3;165m", "\x1b[38;2;236;3;163m", "\x1b[38;2;240;2;162m", "\x1b[38;2;244;2;160m", "\x1b[38;2;248;2;159m", "\x1b[38;2;252;2;157m", "\x1b[38;2;2;10;252m", "\x1b[38;2;6;10;250m", "\x1b[38;2;10;10;249m", "\x1b[38;2;14;10;247m", "\x1b[38;2;18;9;246m", "\x1b[38;2;22;9;244m", "\x1b[38;2;26;9;243m", "\x1b[38;2;30;9;241m", "\x1b[38;2;34;9;240m", "\x1b[38;2;38;9;238m", "\x1b[38;2;42;9;237m", "\x1b[38;2;46;9;235m", "\x1b[38;2;50;8;234m", "\x1b[38;2;54;8;232m", "\x1b[38;2;58;8;231m", "\x1b[38;2;62;8;229m", "\x1b[38;2;65;8;228m", "\x1b[38;2;69;8;226m", "\x1b[38;2;73;8;225m", "\x1b[38;2;77;8;223m", "\x1b[38;2;81;7;222m", "\x1b[38;2;85;7;220m", "\x1b[38;2;89;7;219m", "\x1b[38;2;93;7;217m", "\x1b[38;2;97;7;216m", "\x1b[38;2;101;7;214m", "\x1b[38;2;105;7;213m", "\x1b[38;2;109;7;211m", "\x1b[38;2;113;6;210m", "\x1b[38;2;117;6;208m", "\x1b[38;2;121;6;207m", "\x1b[38;2;125;6;205m", "\x1b[38;2;129;6;204m", "\x1b[38;2;133;6;202m", "\x1b[38;2;137;6;201m", "\x1b[38;2;141;6;199m", "\x1b[38;2;145;5;198m", "\x1b[38;2;149;5;196m", "\x1b[38;2;153;5;195m", "\x1b[38;2;157;5;193m", "\x1b[38;2;161;5;192m", "\x1b[38;2;165;5;190m", "\x1b[38;2;169;5;189m", "\x1b[38;2;173;5;187m", "\x1b[38;2;177;4;186m", "\x1b[38;2;181;4;184m", "\x1b[38;2;185;4;183m", "\x1b[38;2;189;4;181m", "\x1b[38;2;192;4;180m", "\x1b[38;2;196;4;178m", "\x1b[38;2;200;4;177m", "\x1b[38;2;204;4;175m", "\x1b[38;2;208;3;174m", "\x1b[38;2;212;3;172m", "\x1b[38;2;216;3;171m", "\x1b[38;2;220;3;169m", "\x1b[38;2;224;3;168m", "\x1b[38;2;228;3;166m", "\x1b[38;2;232;3;165m", "\x1b[38;2;236;3;163m", "\x1b[38;2;240;2;162m", "\x1b[38;2;244;2;160m", "\x1b[38;2;248;2;159m", "\x1b[38;2;252;2;157m", "\x1b[38;2;2;10;252m", "\x1b[38;2;6;10;250m", "\x1b[38;2;10;10;249m", "\x1b[38;2;14;10;247m", "\x1b[38;2;18;9;246m", "\x1b[38;2;22;9;244m", "\x1b[38;2;26;9;243m", "\x1b[38;2;30;9;241m", "\x1b[38;2;34;9;240m", "\x1b[38;2;38;9;238m", "\x1b[38;2;42;9;237m", "\x1b[38;2;46;9;235m", "\x1b[38;2;50;8;234m", "\x1b[38;2;54;8;232m", "\x1b[38;2;58;8;231m", "\x1b[38;2;62;8;229m", "\x1b[38;2;65;8;228m", "\x1b[38;2;69;8;226m", "\x1b[38;2;73;8;225m", "\x1b[38;2;77;8;223m", "\x1b[38;2;81;7;222m", "\x1b[38;2;85;7;220m", "\x1b[38;2;89;7;219m", "\x1b[38;2;93;7;217m", "\x1b[38;2;97;7;216m", "\x1b[38;2;101;7;214m", "\x1b[38;2;105;7;213m", "\x1b[38;2;109;7;211m", "\x1b[38;2;113;6;210m", "\x1b[38;2;117;6;208m", "\x1b[38;2;121;6;207m", "\x1b[38;2;125;6;205m", "\x1b[38;2;129;6;204m", "\x1b[38;2;133;6;202m", "\x1b[38;2;137;6;201m", "\x1b[38;2;141;6;199m", "\x1b[38;2;145;5;198m", "\x1b[38;2;149;5;196m", "\x1b[38;2;153;5;195m", "\x1b[38;2;157;5;193m", "\x1b[38;2;161;5;192m", "\x1b[38;2;165;5;190m", "\x1b[38;2;169;5;189m", "\x1b[38;2;173;5;187m", "\x1b[38;2;177;4;186m", "\x1b[38;2;181;4;184m", "\x1b[38;2;185;4;183m", "\x1b[38;2;189;4;181m", "\x1b[38;2;192;4;180m", "\x1b[38;2;196;4;178m", "\x1b[38;2;200;4;177m", "\x1b[38;2;204;4;175m", "\x1b[38;2;208;3;174m", "\x1b[38;2;212;3;172m", "\x1b[38;2;216;3;171m", "\x1b[38;2;220;3;169m", "\x1b[38;2;224;3;168m", "\x1b[38;2;228;3;166m", "\x1b[38;2;232;3;165m", "\x1b[38;2;236;3;163m", "\x1b[38;2;240;2;162m", "\x1b[38;2;244;2;160m", "\x1b[38;2;248;2;159m", "\x1b[38;2;252;2;157m"}

	GradientTwo = []string{"[38;2;247;222;132m", "[38;2;246;220;133m", "[38;2;244;219;135m", "[38;2;242;218;137m", "[38;2;240;217;139m", "[38;2;239;215;140m", "[38;2;237;214;142m", "[38;2;235;213;144m", "[38;2;233;212;146m", "[38;2;232;210;147m", "[38;2;230;209;149m", "[38;2;228;208;151m", "[38;2;226;207;153m", "[38;2;225;205;154m", "[38;2;223;204;156m", "[38;2;221;203;158m", "[38;2;219;202;160m", "[38;2;218;200;161m", "[38;2;216;199;163m", "[38;2;214;198;165m", "[38;2;212;197;167m", "[38;2;211;195;168m", "[38;2;209;194;170m", "[38;2;207;193;172m", "[38;2;205;192;174m", "[38;2;204;190;175m", "[38;2;202;189;177m", "[38;2;200;188;179m", "[38;2;198;187;181m", "[38;2;197;185;182m", "[38;2;195;184;184m", "[38;2;193;183;186m", "[38;2;191;182;188m", "[38;2;190;180;190m", "[38;2;188;179;191m", "[38;2;186;178;193m", "[38;2;184;177;195m", "[38;2;182;176;197m", "[38;2;181;174;198m", "[38;2;179;173;200m", "[38;2;177;172;202m", "[38;2;175;171;204m", "[38;2;174;169;205m", "[38;2;172;168;207m", "[38;2;170;167;209m", "[38;2;168;166;211m", "[38;2;167;164;212m", "[38;2;165;163;214m", "[38;2;163;162;216m", "[38;2;161;161;218m", "[38;2;160;159;219m", "[38;2;158;158;221m", "[38;2;156;157;223m", "[38;2;154;156;225m", "[38;2;153;154;226m", "[38;2;151;153;228m", "[38;2;149;152;230m", "[38;2;147;151;232m", "[38;2;146;149;233m", "[38;2;144;148;235m", "[38;2;142;147;237m", "[38;2;140;146;239m", "[38;2;139;144;240m", "[38;2;137;143;242m", "[38;2;135;142;244m", "[38;2;133;141;246m", "[38;2;132;139;247m", "[38;2;130;138;249m", "[38;2;128;137;251m", "[38;2;126;136;253m", "[38;2;125;134;254m"}
)
